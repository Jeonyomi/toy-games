:root{--bg:#050510;--card:#0e2a23;--text:#eafff7;--muted:#9ad2c3;--accent:#00ffff;--accent2:#ff00ff;--cab-h:min(820px,92vh)}
*{box-sizing:border-box}
body{margin:0;min-height:100vh;display:grid;place-items:center;background:radial-gradient(circle at 20% 10%,#123429,#071914 55%,#04130f);color:var(--text);font-family:Inter,system-ui,sans-serif;padding:12px}
.wrap{position:relative;width:min(760px,96vw);height:var(--cab-h);min-height:var(--cab-h);max-height:var(--cab-h);background:linear-gradient(180deg,#102e26,#0e2a23);border:2px solid #2f7a63;border-radius:24px;padding:16px;box-shadow:0 18px 40px rgba(0,0,0,.45), inset 0 0 0 2px rgba(84,180,149,.12);display:flex;flex-direction:column;overflow:hidden}
.marquee{font-size:.78rem;font-weight:800;letter-spacing:.4px;background:#0b221c;border:1px solid #1f5d4b;color:#96ffd8;padding:6px 10px;border-radius:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.cabinet-deco{display:flex;justify-content:center;padding:8px 0 2px}.coin-slot{display:inline-block;width:72px;height:10px;border-radius:99px;background:linear-gradient(180deg,#081b16,#163a30);border:1px solid #2f7a63;box-shadow:inset 0 2px 4px rgba(0,0,0,.6),0 0 12px rgba(48,178,132,.25)}
.sub{margin:0;color:var(--muted);font-size:.9rem}
.ver{font-size:.65rem;padding:2px 6px;border:1px solid #2ac799;border-radius:999px;vertical-align:middle;color:#a6ffe2}

.stage{position:relative;flex:1;min-height:380px;border-radius:16px;border:1px solid rgba(122,255,213,.16);background:linear-gradient(180deg,#060614,#03030a);overflow:hidden;margin-top:10px}
.stage canvas{display:block;width:100%;height:100%}

/* UI layer scoped inside stage */
#uiLayer{position:absolute;inset:0;pointer-events:none;z-index:10}
.top-bar{position:absolute;top:14px;left:50%;transform:translateX(-50%);width:min(92%,900px);display:flex;flex-direction:column;align-items:center;gap:10px}
.xp-container{width:100%;height:13px;background:rgba(0,0,0,.7);border:2px solid #334;border-radius:10px;overflow:hidden;box-shadow:0 0 15px rgba(0,255,255,.3)}
.xp-bar{width:0%;height:100%;background:linear-gradient(90deg,#0ff,#0a0);transition:width .2s ease-out;box-shadow:0 0 10px #0ff}
.stats{display:flex;justify-content:space-between;width:100%;padding:0 12px;font-size:16px;font-weight:900;text-shadow:0 0 10px rgba(0,255,255,.55)}

#screens{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(5,5,15,.85);backdrop-filter:blur(8px);pointer-events:auto;z-index:20}
#screens>div{display:none;flex-direction:column;align-items:center}
.screen-title{font-size:44px;font-weight:900;margin-bottom:14px;text-transform:uppercase;letter-spacing:3px;text-align:center}
.title-neon{color:#fff;text-shadow:0 0 10px var(--accent),0 0 20px var(--accent),0 0 40px var(--accent),0 0 80px var(--accent);margin-bottom:8px}
.title-sub{font-size:18px;color:#aaa;margin-bottom:30px;font-weight:400;text-align:center;padding:0 12px}
.title-level-up{background:linear-gradient(90deg,#ff0,#fa0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-shadow:0 0 20px rgba(255,200,0,.5)}
.title-game-over{color:#f22;text-shadow:0 0 20px #f00,0 0 40px #f00}
.cards-container{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;max-width:900px;padding:0 10px}
.skill-card{width:210px;padding:18px;background:rgba(20,20,30,.9);border:2px solid #446;border-radius:15px;cursor:pointer;transition:all .2s;display:flex;flex-direction:column;align-items:center;text-align:center;position:relative;overflow:hidden}
.skill-card:hover{transform:translateY(-6px) scale(1.03);border-color:var(--accent);box-shadow:0 10px 30px rgba(0,255,255,.3)}
.skill-icon{font-size:42px;margin-bottom:10px}
.skill-name{font-size:18px;font-weight:900;margin-bottom:8px;color:#fff}
.skill-desc{font-size:13px;color:#aaa;line-height:1.35}
.skill-level{font-size:12px;font-weight:900;color:var(--accent);margin-top:10px;text-transform:uppercase}
.btn{padding:12px 36px;font-size:18px;font-weight:900;background:transparent;color:white;border:2px solid var(--accent);border-radius:30px;cursor:pointer;transition:all .25s;text-transform:uppercase;letter-spacing:2px;box-shadow:0 0 15px rgba(0,255,255,.3), inset 0 0 15px rgba(0,255,255,.1)}
.btn:hover{background:var(--accent);color:#000;box-shadow:0 0 30px var(--accent)}

.damage-text{position:absolute;color:white;font-weight:900;font-size:16px;pointer-events:none;text-shadow:0 0 5px black;z-index:5;animation:floatUp .8s ease-out forwards}
@keyframes floatUp{0%{transform:translateY(0);opacity:1}100%{transform:translateY(-40px);opacity:0}}

.floating-hp{position:absolute;width:40px;height:6px;background:rgba(0,0,0,.8);border-radius:3px;pointer-events:none;transform:translate(-50%,-50%);border:1px solid #333;z-index:4}
.floating-hp-bar{width:100%;height:100%;background:#0f0;border-radius:2px;transition:width .1s}
.player-hp-bar{background:#f22}

.crt-toggle{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:.85rem;margin-top:8px}
.crt-on{position:relative}
.crt-on::before{content:'';position:absolute;inset:0;pointer-events:none;background:repeating-linear-gradient(to bottom,rgba(255,255,255,.03) 0 1px,rgba(0,0,0,.02) 1px 3px);mix-blend-mode:overlay;border-radius:24px}
.crt-on::after{content:'';position:absolute;inset:0;pointer-events:none;background:radial-gradient(ellipse at center,transparent 55%,rgba(0,0,0,.25));border-radius:24px}

@media (max-width:520px){
  .stats{font-size:14px}
  .screen-title{font-size:36px}
  .skill-card{width:min(260px,92vw)}
}
